import{s as le,n as B,b as ie,f as ae,o as De,r as Ee}from"./scheduler.bc760b9c.js";import{S as Me,i as ke,e as j,a as A,f as m,A as we,B as I,C as S,j as M,k as d,D as y,z as k,E as oe,s as Y,g as P,r as fe,x as Oe,c as Z,h as R,u as ue,l as $,v as de,F as x,d as he,t as pe,w as me,m as se,n as re}from"./index.b6611d32.js";function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ce(e,t,r){const a=e.slice();return a[5]=t[r],a}function _e(e){let t,r,a,i,n,s,o,p,E,_,b;return{c(){t=I("svg"),r=I("defs"),a=I("pattern"),i=I("line"),n=I("path"),s=I("path"),o=I("path"),p=I("path"),E=I("path"),_=I("path"),b=I("path"),this.h()},l(g){t=S(g,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var c=M(t);r=S(c,"defs",{});var W=M(r);a=S(W,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var V=M(a);i=S(V,"line",{stroke:!0,"stroke-width":!0,y2:!0}),M(i).forEach(m),V.forEach(m),W.forEach(m),n=S(c,"path",{d:!0,class:!0}),M(n).forEach(m),s=S(c,"path",{d:!0,class:!0}),M(s).forEach(m),o=S(c,"path",{d:!0,class:!0}),M(o).forEach(m),p=S(c,"path",{d:!0,class:!0}),M(p).forEach(m),E=S(c,"path",{d:!0,class:!0}),M(E).forEach(m),_=S(c,"path",{d:!0,class:!0}),M(_).forEach(m),b=S(c,"path",{d:!0,class:!0}),M(b).forEach(m),c.forEach(m),this.h()},h(){d(i,"stroke","#800"),d(i,"stroke-width","1px"),d(i,"y2","1"),d(a,"id","off-fill"),d(a,"width","1"),d(a,"height","1"),d(a,"patternUnits","userSpaceOnUse"),d(a,"patternTransform","rotate(10)"),d(n,"d","M1 1l1-1h6l1 1-1 1H2z"),d(n,"class","svelte-n5l988"),y(n,"on",e[1][e[5]][0]),d(s,"d","M9 1l1 1v6L9 9 8 8V2z"),d(s,"class","svelte-n5l988"),y(s,"on",e[1][e[5]][1]),d(o,"d","M9 9l1 1v6l-1 1-1-1v-6z"),d(o,"class","svelte-n5l988"),y(o,"on",e[1][e[5]][2]),d(p,"d","M9 17l-1 1H2l-1-1 1-1h6z"),d(p,"class","svelte-n5l988"),y(p,"on",e[1][e[5]][3]),d(E,"d","M1 17l-1-1v-6l1-1 1 1v6z"),d(E,"class","svelte-n5l988"),y(E,"on",e[1][e[5]][4]),d(_,"d","M1 9L0 8V2l1-1 1 1v6z"),d(_,"class","svelte-n5l988"),y(_,"on",e[1][e[5]][5]),d(b,"d","M1 9l1-1h6l1 1-1 1H2z"),d(b,"class","svelte-n5l988"),y(b,"on",e[1][e[5]][6]),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width","192"),d(t,"height","320"),d(t,"viewBox","-1 -1 12 20"),d(t,"class","segment svelte-n5l988")},m(g,c){A(g,t,c),k(t,r),k(r,a),k(a,i),k(t,n),k(t,s),k(t,o),k(t,p),k(t,E),k(t,_),k(t,b)},p(g,c){c&3&&y(n,"on",g[1][g[5]][0]),c&3&&y(s,"on",g[1][g[5]][1]),c&3&&y(o,"on",g[1][g[5]][2]),c&3&&y(p,"on",g[1][g[5]][3]),c&3&&y(E,"on",g[1][g[5]][4]),c&3&&y(_,"on",g[1][g[5]][5]),c&3&&y(b,"on",g[1][g[5]][6])},d(g){g&&m(t)}}}function Fe(e){let t,r=ee(e[0]),a=[];for(let i=0;i<r.length;i+=1)a[i]=_e(ce(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=j()},l(i){for(let n=0;n<a.length;n+=1)a[n].l(i);t=j()},m(i,n){for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(i,n);A(i,t,n)},p(i,[n]){if(n&3){r=ee(i[0]);let s;for(s=0;s<r.length;s+=1){const o=ce(i,r,s);a[s]?a[s].p(o,n):(a[s]=_e(o),a[s].c(),a[s].m(t.parentNode,t))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},i:B,o:B,d(i){i&&m(t),we(a,i)}}}function Ne(e,t,r){let a,{minDigits:i=3}=t,{maxDigits:n=3}=t,{number:s}=t;const o={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0],"-":[!1,!1,!1,!1,!1,!1,!0]," ":[!1,!1,!1,!1,!1,!1,!1]};return e.$$set=p=>{"minDigits"in p&&r(2,i=p.minDigits),"maxDigits"in p&&r(3,n=p.maxDigits),"number"in p&&r(4,s=p.number)},e.$$.update=()=>{e.$$.dirty&28&&r(0,a=Math.floor(s).toString().padStart(i," ").slice(-n).split(""))},[a,o,i,n,s]}class ge extends Me{constructor(t){super(),ke(this,t,Ne,Fe,le,{minDigits:2,maxDigits:3,number:4})}}function ye(e,t,r){const a=e.slice();return a[31]=t[r],a[32]=t,a[33]=r,a}function Le(e){return{c(){this.h()},l(t){this.h()},h(){document.title="Minesweeper - Lost"},m:B,d:B}}function We(e){return document.title="Minesweeper - Victory - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0"),{c:B,l:B,m:B,d:B}}function ze(e){return document.title="Minesweeper - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0")+" - 🚩 "+e[3],{c:B,l:B,m:B,d:B}}function be(e){let t;function r(n,s){if(n[2]==n[6].Generated)return ze;if(n[2]==n[6].Won)return We;if(n[2]==n[6].Lost)return Le}let a=r(e),i=a&&a(e);return{c(){i&&i.c(),t=j()},l(n){i&&i.l(n),t=j()},m(n,s){i&&i.m(n,s),A(n,t,s)},p(n,s){a!==(a=r(n))&&(i&&i.d(1),i=a&&a(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&m(t),i&&i.d(n)}}}function Be(e){let t;return{c(){t=se("😵")},l(r){t=re(r,"😵")},m(r,a){A(r,t,a)},d(r){r&&m(t)}}}function Ve(e){let t;return{c(){t=se("😎")},l(r){t=re(r,"😎")},m(r,a){A(r,t,a)},d(r){r&&m(t)}}}function Ce(e){let t;return{c(){t=se("😊")},l(r){t=re(r,"😊")},m(r,a){A(r,t,a)},d(r){r&&m(t)}}}function Ie(e){let t,r,a,i;return{c(){t=P("div"),this.h()},l(n){t=R(n,"DIV",{class:!0}),M(t).forEach(m),this.h()},h(){d(t,"class",r="tile"+(e[31].type==e[7].Open?` mines-nearby-${e[9](e[31].x,e[31].y)}`:"")+" svelte-1ao09xa"),y(t,"opened",e[31].type==e[7].Open),y(t,"flagged",e[31].type==e[7].Flagged),y(t,"exploded",e[31].isMine&&e[31].type==e[7].Open),y(t,"displayMine",e[2]==e[6].Lost&&e[31].isMine)},m(n,s){A(n,t,s),a||(i=x(t,"contextmenu",e[20]),a=!0)},p(n,s){s[0]&16&&r!==(r="tile"+(n[31].type==n[7].Open?` mines-nearby-${n[9](n[31].x,n[31].y)}`:"")+" svelte-1ao09xa")&&d(t,"class",r),s[0]&144&&y(t,"opened",n[31].type==n[7].Open),s[0]&144&&y(t,"flagged",n[31].type==n[7].Flagged),s[0]&144&&y(t,"exploded",n[31].isMine&&n[31].type==n[7].Open),s[0]&84&&y(t,"displayMine",n[2]==n[6].Lost&&n[31].isMine)},d(n){n&&m(t),a=!1,i()}}}function Se(e){let t,r,a,i;function n(...o){return e[18](e[31],e[32],e[33],...o)}function s(...o){return e[19](e[31],e[32],e[33],...o)}return{c(){t=P("button"),this.h()},l(o){t=R(o,"BUTTON",{class:!0}),M(t).forEach(m),this.h()},h(){d(t,"class",r="tile"+(e[31].type==e[7].Open?` mines-nearby-${e[9](e[31].x,e[31].y)}`:"")+" svelte-1ao09xa"),y(t,"opened",e[31].type==e[7].Open),y(t,"flagged",e[31].type==e[7].Flagged),y(t,"exploded",e[31].isMine&&e[31].type==e[7].Open)},m(o,p){A(o,t,p),a||(i=[x(t,"click",n),x(t,"contextmenu",s)],a=!0)},p(o,p){e=o,p[0]&16&&r!==(r="tile"+(e[31].type==e[7].Open?` mines-nearby-${e[9](e[31].x,e[31].y)}`:"")+" svelte-1ao09xa")&&d(t,"class",r),p[0]&144&&y(t,"opened",e[31].type==e[7].Open),p[0]&144&&y(t,"flagged",e[31].type==e[7].Flagged),p[0]&144&&y(t,"exploded",e[31].isMine&&e[31].type==e[7].Open)},d(o){o&&m(t),a=!1,Ee(i)}}}function ve(e){let t,r;function a(s,o){return o[0]&20&&(t=null),t==null&&(t=!!(s[2]==s[6].Waiting||s[2]==s[6].Generated&&(s[31].type!=s[7].Open||s[11](s[31].x,s[31].y)&&s[9](s[31].x,s[31].y)==s[10](s[31].x,s[31].y)))),t?Se:Ie}let i=a(e,[-1,-1]),n=i(e);return{c(){n.c(),r=j()},l(s){n.l(s),r=j()},m(s,o){n.m(s,o),A(s,r,o)},p(s,o){i===(i=a(s,o))&&n?n.p(s,o):(n.d(1),n=i(s),n&&(n.c(),n.m(r.parentNode,r)))},d(s){s&&m(r),n.d(s)}}}function Ae(e){let t=e[5],r,a,i,n,s,o,p,E,_,b,g,c,W,V,F,H,J,Q,N=be(e);function X(f){e[16](f)}let q={minDigits:3};e[3]!==void 0&&(q.number=e[3]),o=new ge({props:q}),ie.push(()=>oe(o,"number",X));function G(f,D){if(f[2]==f[6].Waiting||f[2]==f[6].Generated)return Ce;if(f[2]==f[6].Won)return Ve;if(f[2]==f[6].Lost)return Be}let z=G(e),w=z&&z(e);function te(f){e[17](f)}let K={minDigits:3};e[5]!==void 0&&(K.number=e[5]),c=new ge({props:K}),ie.push(()=>oe(c,"number",te));let T=ee(e[4]),v=[];for(let f=0;f<T.length;f+=1)v[f]=ve(ye(e,T,f));return{c(){N.c(),r=j(),a=Y(),i=P("div"),n=P("div"),s=P("div"),fe(o.$$.fragment),E=Y(),_=P("button"),w&&w.c(),b=Y(),g=P("div"),fe(c.$$.fragment),V=Y(),F=P("div");for(let f=0;f<v.length;f+=1)v[f].c();this.h()},l(f){const D=Oe("svelte-d4ouuz",document.head);N.l(D),r=j(),D.forEach(m),a=Z(f),i=R(f,"DIV",{class:!0});var L=M(i);n=R(L,"DIV",{class:!0});var C=M(n);s=R(C,"DIV",{class:!0});var l=M(s);ue(o.$$.fragment,l),l.forEach(m),E=Z(C),_=R(C,"BUTTON",{class:!0});var u=M(_);w&&w.l(u),u.forEach(m),b=Z(C),g=R(C,"DIV",{class:!0});var h=M(g);ue(c.$$.fragment,h),h.forEach(m),C.forEach(m),V=Z(L),F=R(L,"DIV",{class:!0,style:!0});var O=M(F);for(let U=0;U<v.length;U+=1)v[U].l(O);O.forEach(m),L.forEach(m),this.h()},h(){d(s,"class","display svelte-1ao09xa"),d(_,"class","button svelte-1ao09xa"),d(g,"class","display svelte-1ao09xa"),d(n,"class","toparea svelte-1ao09xa"),d(F,"class","board svelte-1ao09xa"),$(F,"grid-template-columns","repeat("+e[0]+", 1fr)"),$(F,"grid-template-rows","repeat("+e[1]+", 1fr)"),d(i,"class","game svelte-1ao09xa")},m(f,D){N.m(document.head,null),k(document.head,r),A(f,a,D),A(f,i,D),k(i,n),k(n,s),de(o,s,null),k(n,E),k(n,_),w&&w.m(_,null),k(n,b),k(n,g),de(c,g,null),k(i,V),k(i,F);for(let L=0;L<v.length;L+=1)v[L]&&v[L].m(F,null);H=!0,J||(Q=x(_,"click",e[14]),J=!0)},p(f,D){D[0]&32&&le(t,t=f[5])?(N.d(1),N=be(f),N.c(),N.m(r.parentNode,r)):N.p(f,D);const L={};!p&&D[0]&8&&(p=!0,L.number=f[3],ae(()=>p=!1)),o.$set(L),z!==(z=G(f))&&(w&&w.d(1),w=z&&z(f),w&&(w.c(),w.m(_,null)));const C={};if(!W&&D[0]&32&&(W=!0,C.number=f[5],ae(()=>W=!1)),c.$set(C),D[0]&16340){T=ee(f[4]);let l;for(l=0;l<T.length;l+=1){const u=ye(f,T,l);v[l]?v[l].p(u,D):(v[l]=ve(u),v[l].c(),v[l].m(F,null))}for(;l<v.length;l+=1)v[l].d(1);v.length=T.length}(!H||D[0]&1)&&$(F,"grid-template-columns","repeat("+f[0]+", 1fr)"),(!H||D[0]&2)&&$(F,"grid-template-rows","repeat("+f[1]+", 1fr)")},i(f){H||(he(o.$$.fragment,f),he(c.$$.fragment,f),H=!0)},o(f){pe(o.$$.fragment,f),pe(c.$$.fragment,f),H=!1},d(f){f&&(m(a),m(i)),m(r),N.d(f),me(o),w&&w.d(),me(c),we(v,f),J=!1,Q()}}}function Te(e,t,r){var a=(l=>(l[l.Waiting=0]="Waiting",l[l.Generated=1]="Generated",l[l.Won=2]="Won",l[l.Lost=3]="Lost",l))(a||{});let i=0,{width:n}=t,{height:s}=t,{numMines:o}=t,p=0;var E=(l=>(l[l.Covered=0]="Covered",l[l.Open=1]="Open",l[l.Flagged=2]="Flagged",l))(E||{});let _=[];function b(l,u){return l<0||l>=n||u<0||u>=s?{x:l,y:u,isMine:!1,type:1}:_[l+u*n]}function g(){r(4,_=new Array(n*s));for(let l=0;l<n;l++)for(let u=0;u<s;u++)r(4,_[l+u*n]={x:l,y:u,isMine:!1,type:0},_)}const c=[{x:0,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0}];function*W(l,u){for(const h of c)yield b(l+h.x,u+h.y)}function V(l,u){let h=0;for(const O of W(l,u))O.isMine&&h++;return h}function F(l,u){let h=0;for(const O of W(l,u))O.type==2&&h++;return h}function H(l,u){for(const h of W(l,u))if(h.type==0)return!0;return!1}function J(l,u){if(_.length-9<=o)throw new Error("Too many mines for board, cannot generate board.");do{g();const h=[..._];for(let O=0;O<o;O++){const U=Math.floor(Math.random()*h.length),ne=h.splice(U,1)[0];ne.isMine=!0}}while(V(l,u)>0);r(2,i=1),te()}function Q(){if(i!=1)return;_.reduce((u,h)=>h.isMine&&h.type==2?++u:u,0)==o&&p==0&&_.every(u=>u.type==2||u.type==1)&&(r(2,i=2),K())}function N(l,u){if(i==0&&J(l,u),i==1&&b(l,u).type!=2){if(b(l,u).type==0){if(b(l,u).type=1,b(l,u).isMine){r(2,i=3),K();return}if(V(l,u)==0)for(const h of W(l,u))N(h.x,h.y)}else if(b(l,u).type==1&&V(l,u)==F(l,u))for(const h of W(l,u))b(h.x,h.y).type==0&&N(h.x,h.y);Q()}}function X(l,u){if(i!=1)return;const h=b(l,u);if(h.type==1)return;h.type=h.type==0?2:0;const O=_.reduce((U,ne)=>ne.type==2?++U:U,0);r(3,p=o-O),Q()}let q=-1,G=0,z=0;function w(){clearTimeout(q);const l=Date.now()-G+1005;q=setTimeout(()=>w(),Math.floor(l/1e3)*1e3%1e3),r(5,z=Math.floor((Date.now()-G)/1e3))}function te(){G=Date.now(),w()}function K(){clearTimeout(q)}function T(){r(2,i=0),g(),r(3,p=o),K(),r(5,z=0)}De(()=>{T()});function v(l){p=l,r(3,p)}function f(l){z=l,r(5,z)}const D=(l,u,h,O)=>{i!=a.Waiting&&i!=a.Generated||(O.preventDefault(),N(l.x,l.y),r(4,u[h]=b(l.x,l.y),_))},L=(l,u,h,O)=>{i==a.Generated&&(O.preventDefault(),X(l.x,l.y),r(4,u[h]=b(l.x,l.y),_))},C=l=>{i==a.Generated&&l.preventDefault()};return e.$$set=l=>{"width"in l&&r(0,n=l.width),"height"in l&&r(1,s=l.height),"numMines"in l&&r(15,o=l.numMines)},[n,s,i,p,_,z,a,E,b,V,F,H,N,X,T,o,v,f,D,L,C]}class Pe extends Me{constructor(t){super(),ke(this,t,Te,Ae,le,{width:0,height:1,numMines:15},null,[-1,-1])}}export{Pe as B};
