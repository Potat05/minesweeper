import{s as ne,n as L,b as de,f as me,o as ke,r as Ee}from"../chunks/scheduler.bc760b9c.js";import{S as fe,i as ue,e as A,a as I,f as _,A as De,B as F,C as V,j as D,k as d,D as v,z as M,E as pe,s as $,g as R,r as re,x as ze,c as x,h as T,u as le,l as ee,v as ie,F as oe,d as Q,t as G,w as ae,m as ce,n as he,b as Oe,p as je}from"../chunks/index.b6611d32.js";function te(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Le=!0,Ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le},Symbol.toStringTag,{value:"Module"}));function ge(e,t,r){const n=e.slice();return n[5]=t[r],n}function _e(e){let t,r,n,s,i,o,u,h,w,p,b;return{c(){t=F("svg"),r=F("defs"),n=F("pattern"),s=F("line"),i=F("path"),o=F("path"),u=F("path"),h=F("path"),w=F("path"),p=F("path"),b=F("path"),this.h()},l(g){t=V(g,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var m=D(t);r=V(m,"defs",{});var N=D(r);n=V(N,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var S=D(n);s=V(S,"line",{stroke:!0,"stroke-width":!0,y2:!0}),D(s).forEach(_),S.forEach(_),N.forEach(_),i=V(m,"path",{d:!0,class:!0}),D(i).forEach(_),o=V(m,"path",{d:!0,class:!0}),D(o).forEach(_),u=V(m,"path",{d:!0,class:!0}),D(u).forEach(_),h=V(m,"path",{d:!0,class:!0}),D(h).forEach(_),w=V(m,"path",{d:!0,class:!0}),D(w).forEach(_),p=V(m,"path",{d:!0,class:!0}),D(p).forEach(_),b=V(m,"path",{d:!0,class:!0}),D(b).forEach(_),m.forEach(_),this.h()},h(){d(s,"stroke","#800"),d(s,"stroke-width","1px"),d(s,"y2","1"),d(n,"id","off-fill"),d(n,"width","1"),d(n,"height","1"),d(n,"patternUnits","userSpaceOnUse"),d(n,"patternTransform","rotate(10)"),d(i,"d","M1 1l1-1h6l1 1-1 1H2z"),d(i,"class","svelte-n5l988"),v(i,"on",e[1][e[5]][0]),d(o,"d","M9 1l1 1v6L9 9 8 8V2z"),d(o,"class","svelte-n5l988"),v(o,"on",e[1][e[5]][1]),d(u,"d","M9 9l1 1v6l-1 1-1-1v-6z"),d(u,"class","svelte-n5l988"),v(u,"on",e[1][e[5]][2]),d(h,"d","M9 17l-1 1H2l-1-1 1-1h6z"),d(h,"class","svelte-n5l988"),v(h,"on",e[1][e[5]][3]),d(w,"d","M1 17l-1-1v-6l1-1 1 1v6z"),d(w,"class","svelte-n5l988"),v(w,"on",e[1][e[5]][4]),d(p,"d","M1 9L0 8V2l1-1 1 1v6z"),d(p,"class","svelte-n5l988"),v(p,"on",e[1][e[5]][5]),d(b,"d","M1 9l1-1h6l1 1-1 1H2z"),d(b,"class","svelte-n5l988"),v(b,"on",e[1][e[5]][6]),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width","192"),d(t,"height","320"),d(t,"viewBox","-1 -1 12 20"),d(t,"class","segment svelte-n5l988")},m(g,m){I(g,t,m),M(t,r),M(r,n),M(n,s),M(t,i),M(t,o),M(t,u),M(t,h),M(t,w),M(t,p),M(t,b)},p(g,m){m&3&&v(i,"on",g[1][g[5]][0]),m&3&&v(o,"on",g[1][g[5]][1]),m&3&&v(u,"on",g[1][g[5]][2]),m&3&&v(h,"on",g[1][g[5]][3]),m&3&&v(w,"on",g[1][g[5]][4]),m&3&&v(p,"on",g[1][g[5]][5]),m&3&&v(b,"on",g[1][g[5]][6])},d(g){g&&_(t)}}}function Ne(e){let t,r=te(e[0]),n=[];for(let s=0;s<r.length;s+=1)n[s]=_e(ge(e,r,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=A()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=A()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);I(s,t,i)},p(s,[i]){if(i&3){r=te(s[0]);let o;for(o=0;o<r.length;o+=1){const u=ge(s,r,o);n[o]?n[o].p(u,i):(n[o]=_e(u),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},i:L,o:L,d(s){s&&_(t),De(n,s)}}}function Se(e,t,r){let n,{minDigits:s=3}=t,{maxDigits:i=3}=t,{number:o}=t;const u={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0],"-":[!1,!1,!1,!1,!1,!1,!0]," ":[!1,!1,!1,!1,!1,!1,!1]};return e.$$set=h=>{"minDigits"in h&&r(2,s=h.minDigits),"maxDigits"in h&&r(3,i=h.maxDigits),"number"in h&&r(4,o=h.number)},e.$$.update=()=>{e.$$.dirty&28&&r(0,n=Math.floor(o).toString().padStart(s," ").slice(-i).split(""))},[n,u,s,i,o]}class be extends fe{constructor(t){super(),ue(this,t,Se,Ne,ne,{minDigits:2,maxDigits:3,number:4})}}function ve(e,t,r){const n=e.slice();return n[29]=t[r],n[30]=t,n[31]=r,n}function Fe(e){return{c(){this.h()},l(t){this.h()},h(){document.title="Minesweeper - Lost"},m:L,d:L}}function Ve(e){return document.title="Minesweeper - Victory - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0"),{c:L,l:L,m:L,d:L}}function Ie(e){return document.title="Minesweeper - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0")+" - 🚩 "+e[3],{c:L,l:L,m:L,d:L}}function ye(e){let t;function r(i,o){if(i[2]==i[6].Generated)return Ie;if(i[2]==i[6].Won)return Ve;if(i[2]==i[6].Lost)return Fe}let n=r(e),s=n&&n(e);return{c(){s&&s.c(),t=A()},l(i){s&&s.l(i),t=A()},m(i,o){s&&s.m(i,o),I(i,t,o)},p(i,o){n!==(n=r(i))&&(s&&s.d(1),s=n&&n(i),s&&(s.c(),s.m(t.parentNode,t)))},d(i){i&&_(t),s&&s.d(i)}}}function Pe(e){let t;return{c(){t=ce("😵")},l(r){t=he(r,"😵")},m(r,n){I(r,t,n)},d(r){r&&_(t)}}}function We(e){let t;return{c(){t=ce("😎")},l(r){t=he(r,"😎")},m(r,n){I(r,t,n)},d(r){r&&_(t)}}}function Be(e){let t;return{c(){t=ce("😊")},l(r){t=he(r,"😊")},m(r,n){I(r,t,n)},d(r){r&&_(t)}}}function Me(e){let t,r,n,s;function i(...u){return e[16](e[29],e[30],e[31],...u)}function o(...u){return e[17](e[29],e[30],e[31],...u)}return{c(){t=R("div"),this.h()},l(u){t=T(u,"DIV",{class:!0}),D(t).forEach(_),this.h()},h(){d(t,"class",r="tile"+(e[29].type==e[7].Open?` mines-nearby-${e[9](e[29].x,e[29].y)}`:"")+" svelte-74z2jo"),v(t,"opened",e[29].type==e[7].Open),v(t,"flagged",e[29].type==e[7].Flagged),v(t,"exploded",e[29].isMine&&e[29].type==e[7].Open),v(t,"displayMine",e[2]==e[6].Lost&&e[29].isMine)},m(u,h){I(u,t,h),n||(s=[oe(t,"click",i),oe(t,"contextmenu",o)],n=!0)},p(u,h){e=u,h[0]&16&&r!==(r="tile"+(e[29].type==e[7].Open?` mines-nearby-${e[9](e[29].x,e[29].y)}`:"")+" svelte-74z2jo")&&d(t,"class",r),h[0]&144&&v(t,"opened",e[29].type==e[7].Open),h[0]&144&&v(t,"flagged",e[29].type==e[7].Flagged),h[0]&144&&v(t,"exploded",e[29].isMine&&e[29].type==e[7].Open),h[0]&84&&v(t,"displayMine",e[2]==e[6].Lost&&e[29].isMine)},d(u){u&&_(t),n=!1,Ee(s)}}}function Ce(e){let t=e[5],r,n,s,i,o,u,h,w,p,b,g,m,N,S,O,W,q,H,j=ye(e);function X(a){e[14](a)}let K={minDigits:3};e[3]!==void 0&&(K.number=e[3]),u=new be({props:K}),de.push(()=>pe(u,"number",X));function B(a,E){if(a[2]==a[6].Waiting||a[2]==a[6].Generated)return Be;if(a[2]==a[6].Won)return We;if(a[2]==a[6].Lost)return Pe}let P=B(e),z=P&&P(e);function Y(a){e[15](a)}let Z={minDigits:3};e[5]!==void 0&&(Z.number=e[5]),m=new be({props:Z}),de.push(()=>pe(m,"number",Y));let C=te(e[4]),y=[];for(let a=0;a<C.length;a+=1)y[a]=Me(ve(e,C,a));return{c(){j.c(),r=A(),n=$(),s=R("div"),i=R("div"),o=R("div"),re(u.$$.fragment),w=$(),p=R("button"),z&&z.c(),b=$(),g=R("div"),re(m.$$.fragment),S=$(),O=R("div");for(let a=0;a<y.length;a+=1)y[a].c();this.h()},l(a){const E=ze("svelte-d4ouuz",document.head);j.l(E),r=A(),E.forEach(_),n=x(a),s=T(a,"DIV",{class:!0});var l=D(s);i=T(l,"DIV",{class:!0});var f=D(i);o=T(f,"DIV",{class:!0});var c=D(o);le(u.$$.fragment,c),c.forEach(_),w=x(f),p=T(f,"BUTTON",{class:!0});var k=D(p);z&&z.l(k),k.forEach(_),b=x(f),g=T(f,"DIV",{class:!0});var U=D(g);le(m.$$.fragment,U),U.forEach(_),f.forEach(_),S=x(l),O=T(l,"DIV",{class:!0,style:!0});var J=D(O);for(let se=0;se<y.length;se+=1)y[se].l(J);J.forEach(_),l.forEach(_),this.h()},h(){d(o,"class","display svelte-74z2jo"),d(p,"class","button svelte-74z2jo"),d(g,"class","display svelte-74z2jo"),d(i,"class","toparea svelte-74z2jo"),d(O,"class","board svelte-74z2jo"),ee(O,"grid-template-columns","repeat("+e[0]+", 1fr)"),ee(O,"grid-template-rows","repeat("+e[1]+", 1fr)"),d(s,"class","game svelte-74z2jo")},m(a,E){j.m(document.head,null),M(document.head,r),I(a,n,E),I(a,s,E),M(s,i),M(i,o),ie(u,o,null),M(i,w),M(i,p),z&&z.m(p,null),M(i,b),M(i,g),ie(m,g,null),M(s,S),M(s,O);for(let l=0;l<y.length;l+=1)y[l]&&y[l].m(O,null);W=!0,q||(H=oe(p,"click",e[12]),q=!0)},p(a,E){E[0]&32&&ne(t,t=a[5])?(j.d(1),j=ye(a),j.c(),j.m(r.parentNode,r)):j.p(a,E);const l={};!h&&E[0]&8&&(h=!0,l.number=a[3],me(()=>h=!1)),u.$set(l),P!==(P=B(a))&&(z&&z.d(1),z=P&&P(a),z&&(z.c(),z.m(p,null)));const f={};if(!N&&E[0]&32&&(N=!0,f.number=a[5],me(()=>N=!1)),m.$set(f),E[0]&4052){C=te(a[4]);let c;for(c=0;c<C.length;c+=1){const k=ve(a,C,c);y[c]?y[c].p(k,E):(y[c]=Me(k),y[c].c(),y[c].m(O,null))}for(;c<y.length;c+=1)y[c].d(1);y.length=C.length}(!W||E[0]&1)&&ee(O,"grid-template-columns","repeat("+a[0]+", 1fr)"),(!W||E[0]&2)&&ee(O,"grid-template-rows","repeat("+a[1]+", 1fr)")},i(a){W||(Q(u.$$.fragment,a),Q(m.$$.fragment,a),W=!0)},o(a){G(u.$$.fragment,a),G(m.$$.fragment,a),W=!1},d(a){a&&(_(n),_(s)),_(r),j.d(a),ae(u),z&&z.d(),ae(m),De(y,a),q=!1,H()}}}function Ae(e,t,r){var n=(l=>(l[l.Waiting=0]="Waiting",l[l.Generated=1]="Generated",l[l.Won=2]="Won",l[l.Lost=3]="Lost",l))(n||{});let s=0,{width:i}=t,{height:o}=t,{numMines:u}=t,h=0;var w=(l=>(l[l.Covered=0]="Covered",l[l.Open=1]="Open",l[l.Flagged=2]="Flagged",l))(w||{});let p=[];function b(l,f){return l<0||l>=i||f<0||f>=o?{x:l,y:f,isMine:!1,type:1}:p[l+f*i]}function g(){r(4,p=new Array(i*o));for(let l=0;l<i;l++)for(let f=0;f<o;f++)r(4,p[l+f*i]={x:l,y:f,isMine:!1,type:0},p)}const m=[{x:0,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0}];function*N(l,f){for(const c of m)yield b(l+c.x,f+c.y)}function S(l,f){let c=0;for(const k of N(l,f))k.isMine&&c++;return c}function O(l,f){let c=0;for(const k of N(l,f))k.type==2&&c++;return c}function W(l,f){if(p.length-9<=u)throw new Error("Too many mines for board, cannot generate board.");do{g();const c=[...p];for(let k=0;k<u;k++){const U=Math.floor(Math.random()*c.length),J=c.splice(U,1)[0];J.isMine=!0}}while(S(l,f)>0);r(2,s=1),z()}function q(){if(s!=1)return;p.reduce((f,c)=>c.isMine&&c.type==2?++f:f,0)==u&&h==0&&p.every(f=>f.type==2||f.type==1)&&(r(2,s=2),Y())}function H(l,f){if(s==0&&W(l,f),s==1&&b(l,f).type!=2){if(b(l,f).type==0){if(b(l,f).type=1,b(l,f).isMine){r(2,s=3),Y();return}if(S(l,f)==0)for(const c of N(l,f))H(c.x,c.y)}else if(b(l,f).type==1&&S(l,f)==O(l,f))for(const c of N(l,f))b(c.x,c.y).type==0&&H(c.x,c.y);q()}}function j(l,f){if(s!=1)return;const c=b(l,f);if(c.type==1)return;c.type=c.type==0?2:0;const k=p.reduce((U,J)=>J.type==2?++U:U,0);r(3,h=u-k),q()}let X=-1,K=0,B=0;function P(){clearTimeout(X);const l=Date.now()-K+1005;X=setTimeout(()=>P(),Math.floor(l/1e3)*1e3%1e3),r(5,B=Math.floor((Date.now()-K)/1e3))}function z(){K=Date.now(),P()}function Y(){clearTimeout(X)}function Z(){r(2,s=0),g(),r(3,h=u),Y(),r(5,B=0)}ke(()=>{Z()});function C(l){h=l,r(3,h)}function y(l){B=l,r(5,B)}const a=(l,f,c,k)=>{k.preventDefault(),H(l.x,l.y),r(4,f[c]=b(l.x,l.y),p)},E=(l,f,c,k)=>{k.preventDefault(),j(l.x,l.y),r(4,f[c]=b(l.x,l.y),p)};return e.$$set=l=>{"width"in l&&r(0,i=l.width),"height"in l&&r(1,o=l.height),"numMines"in l&&r(13,u=l.numMines)},[i,o,s,h,p,B,n,w,b,S,H,j,Z,u,C,y,a,E]}class He extends fe{constructor(t){super(),ue(this,t,Ae,Ce,ne,{width:0,height:1,numMines:13},null,[-1,-1])}}function we(e){let t,r;return t=new He({props:{width:e[0],height:e[1],numMines:e[2]}}),{c(){re(t.$$.fragment)},l(n){le(t.$$.fragment,n)},m(n,s){ie(t,n,s),r=!0},p(n,s){const i={};s&1&&(i.width=n[0]),s&2&&(i.height=n[1]),s&4&&(i.numMines=n[2]),t.$set(i)},i(n){r||(Q(t.$$.fragment,n),r=!0)},o(n){G(t.$$.fragment,n),r=!1},d(n){ae(t,n)}}}function Ue(e){let t,r,n=e[3]&&we(e);return{c(){n&&n.c(),t=A()},l(s){n&&n.l(s),t=A()},m(s,i){n&&n.m(s,i),I(s,t,i),r=!0},p(s,[i]){s[3]?n?(n.p(s,i),i&8&&Q(n,1)):(n=we(s),n.c(),Q(n,1),n.m(t.parentNode,t)):n&&(je(),G(n,1,1,()=>{n=null}),Oe())},i(s){r||(Q(n),r=!0)},o(s){G(n),r=!1},d(s){s&&_(t),n&&n.d(s)}}}function Re(e,t,r){let n=30,s=16,i,o=!1;return ke(()=>{const u=new URLSearchParams(window.location.search),h=u.get("size");h&&r(0,[n,s]=h.split("x").map(Number).map(Math.floor),n,r(1,s));const w=u.get("mines");w&&r(2,i=Math.floor(Number(w))),i===void 0&&r(2,i=Math.floor(n*s*.2)),r(3,o=!0)}),[n,s,i,o]}class Je extends fe{constructor(t){super(),ue(this,t,Re,Ue,ne,{})}}export{Je as component,Ke as universal};
