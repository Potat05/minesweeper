import{s as ie,n as he,b as ce,f as me,o as Me,r as De}from"../chunks/scheduler.bc760b9c.js";import{S as ae,i as oe,e as Y,a as C,f as _,A as we,B as N,C as I,j as D,k as c,D as b,z as k,E as de,g as U,r as te,s as x,h as R,u as ne,c as ee,l as X,v as se,F as le,d as S,t as K,w as re,m as fe,n as ue,b as ke,p as Ee}from"../chunks/index.b6611d32.js";function Z(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const ze=!0,He=Object.freeze(Object.defineProperty({__proto__:null,prerender:ze},Symbol.toStringTag,{value:"Module"}));function pe(t,e,s){const n=t.slice();return n[5]=e[s],n}function ge(t){let e,s,n,l,i,o,u,h,y,d,v;return{c(){e=N("svg"),s=N("defs"),n=N("pattern"),l=N("line"),i=N("path"),o=N("path"),u=N("path"),h=N("path"),y=N("path"),d=N("path"),v=N("path"),this.h()},l(g){e=I(g,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var m=D(e);s=I(m,"defs",{});var j=D(s);n=I(j,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var L=D(n);l=I(L,"line",{stroke:!0,"stroke-width":!0,y2:!0}),D(l).forEach(_),L.forEach(_),j.forEach(_),i=I(m,"path",{d:!0,class:!0}),D(i).forEach(_),o=I(m,"path",{d:!0,class:!0}),D(o).forEach(_),u=I(m,"path",{d:!0,class:!0}),D(u).forEach(_),h=I(m,"path",{d:!0,class:!0}),D(h).forEach(_),y=I(m,"path",{d:!0,class:!0}),D(y).forEach(_),d=I(m,"path",{d:!0,class:!0}),D(d).forEach(_),v=I(m,"path",{d:!0,class:!0}),D(v).forEach(_),m.forEach(_),this.h()},h(){c(l,"stroke","#800"),c(l,"stroke-width","1px"),c(l,"y2","1"),c(n,"id","off-fill"),c(n,"width","1"),c(n,"height","1"),c(n,"patternUnits","userSpaceOnUse"),c(n,"patternTransform","rotate(10)"),c(i,"d","M1 1l1-1h6l1 1-1 1H2z"),c(i,"class","svelte-n5l988"),b(i,"on",t[1][t[5]][0]),c(o,"d","M9 1l1 1v6L9 9 8 8V2z"),c(o,"class","svelte-n5l988"),b(o,"on",t[1][t[5]][1]),c(u,"d","M9 9l1 1v6l-1 1-1-1v-6z"),c(u,"class","svelte-n5l988"),b(u,"on",t[1][t[5]][2]),c(h,"d","M9 17l-1 1H2l-1-1 1-1h6z"),c(h,"class","svelte-n5l988"),b(h,"on",t[1][t[5]][3]),c(y,"d","M1 17l-1-1v-6l1-1 1 1v6z"),c(y,"class","svelte-n5l988"),b(y,"on",t[1][t[5]][4]),c(d,"d","M1 9L0 8V2l1-1 1 1v6z"),c(d,"class","svelte-n5l988"),b(d,"on",t[1][t[5]][5]),c(v,"d","M1 9l1-1h6l1 1-1 1H2z"),c(v,"class","svelte-n5l988"),b(v,"on",t[1][t[5]][6]),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","192"),c(e,"height","320"),c(e,"viewBox","-1 -1 12 20"),c(e,"class","segment svelte-n5l988")},m(g,m){C(g,e,m),k(e,s),k(s,n),k(n,l),k(e,i),k(e,o),k(e,u),k(e,h),k(e,y),k(e,d),k(e,v)},p(g,m){m&3&&b(i,"on",g[1][g[5]][0]),m&3&&b(o,"on",g[1][g[5]][1]),m&3&&b(u,"on",g[1][g[5]][2]),m&3&&b(h,"on",g[1][g[5]][3]),m&3&&b(y,"on",g[1][g[5]][4]),m&3&&b(d,"on",g[1][g[5]][5]),m&3&&b(v,"on",g[1][g[5]][6])},d(g){g&&_(e)}}}function Oe(t){let e,s=Z(t[0]),n=[];for(let l=0;l<s.length;l+=1)n[l]=ge(pe(t,s,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Y()},l(l){for(let i=0;i<n.length;i+=1)n[i].l(l);e=Y()},m(l,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(l,i);C(l,e,i)},p(l,[i]){if(i&3){s=Z(l[0]);let o;for(o=0;o<s.length;o+=1){const u=pe(l,s,o);n[o]?n[o].p(u,i):(n[o]=ge(u),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},i:he,o:he,d(l){l&&_(e),we(n,l)}}}function je(t,e,s){let n,{minDigits:l=3}=e,{maxDigits:i=3}=e,{number:o}=e;const u={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0],"-":[!1,!1,!1,!1,!1,!1,!0]," ":[!1,!1,!1,!1,!1,!1,!1]};return t.$$set=h=>{"minDigits"in h&&s(2,l=h.minDigits),"maxDigits"in h&&s(3,i=h.maxDigits),"number"in h&&s(4,o=h.number)},t.$$.update=()=>{t.$$.dirty&28&&s(0,n=Math.floor(o).toString().padStart(l," ").slice(-i).split(""))},[n,u,l,i,o]}class _e extends ae{constructor(e){super(),oe(this,e,je,Oe,ie,{minDigits:2,maxDigits:3,number:4})}}function ve(t,e,s){const n=t.slice();return n[29]=e[s],n[30]=e,n[31]=s,n}function Fe(t){let e;return{c(){e=fe("ðŸ˜µ")},l(s){e=ue(s,"ðŸ˜µ")},m(s,n){C(s,e,n)},d(s){s&&_(e)}}}function Le(t){let e;return{c(){e=fe("ðŸ˜Ž")},l(s){e=ue(s,"ðŸ˜Ž")},m(s,n){C(s,e,n)},d(s){s&&_(e)}}}function Ne(t){let e;return{c(){e=fe("ðŸ˜Š")},l(s){e=ue(s,"ðŸ˜Š")},m(s,n){C(s,e,n)},d(s){s&&_(e)}}}function be(t){let e,s,n,l;function i(...u){return t[16](t[29],t[30],t[31],...u)}function o(...u){return t[17](t[29],t[30],t[31],...u)}return{c(){e=U("div"),this.h()},l(u){e=R(u,"DIV",{class:!0}),D(e).forEach(_),this.h()},h(){c(e,"class",s="tile"+(t[29].type==t[7].Open?` mines-nearby-${t[9](t[29].x,t[29].y)}`:"")+" svelte-74z2jo"),b(e,"opened",t[29].type==t[7].Open),b(e,"flagged",t[29].type==t[7].Flagged),b(e,"exploded",t[29].isMine&&t[29].type==t[7].Open),b(e,"displayMine",t[2]==t[6].Lost&&t[29].isMine)},m(u,h){C(u,e,h),n||(l=[le(e,"click",i),le(e,"contextmenu",o)],n=!0)},p(u,h){t=u,h[0]&16&&s!==(s="tile"+(t[29].type==t[7].Open?` mines-nearby-${t[9](t[29].x,t[29].y)}`:"")+" svelte-74z2jo")&&c(e,"class",s),h[0]&144&&b(e,"opened",t[29].type==t[7].Open),h[0]&144&&b(e,"flagged",t[29].type==t[7].Flagged),h[0]&144&&b(e,"exploded",t[29].isMine&&t[29].type==t[7].Open),h[0]&84&&b(e,"displayMine",t[2]==t[6].Lost&&t[29].isMine)},d(u){u&&_(e),n=!1,De(l)}}}function Ie(t){let e,s,n,l,i,o,u,h,y,d,v,g,m,j,L,J;function G(a){t[14](a)}let T={minDigits:3};t[3]!==void 0&&(T.number=t[3]),l=new _e({props:T}),ce.push(()=>de(l,"number",G));function W(a,E){if(a[2]==a[6].Waiting||a[2]==a[6].Generated)return Ne;if(a[2]==a[6].Won)return Le;if(a[2]==a[6].Lost)return Fe}let P=W(t),w=P&&P(t);function q(a){t[15](a)}let B={minDigits:3};t[5]!==void 0&&(B.number=t[5]),d=new _e({props:B}),ce.push(()=>de(d,"number",q));let V=Z(t[4]),M=[];for(let a=0;a<V.length;a+=1)M[a]=be(ve(t,V,a));return{c(){e=U("div"),s=U("div"),n=U("div"),te(l.$$.fragment),o=x(),u=U("button"),w&&w.c(),h=x(),y=U("div"),te(d.$$.fragment),g=x(),m=U("div");for(let a=0;a<M.length;a+=1)M[a].c();this.h()},l(a){e=R(a,"DIV",{class:!0});var E=D(e);s=R(E,"DIV",{class:!0});var O=D(s);n=R(O,"DIV",{class:!0});var A=D(n);ne(l.$$.fragment,A),A.forEach(_),o=ee(O),u=R(O,"BUTTON",{class:!0});var z=D(u);w&&w.l(z),z.forEach(_),h=ee(O),y=R(O,"DIV",{class:!0});var H=D(y);ne(d.$$.fragment,H),H.forEach(_),O.forEach(_),g=ee(E),m=R(E,"DIV",{class:!0,style:!0});var r=D(m);for(let f=0;f<M.length;f+=1)M[f].l(r);r.forEach(_),E.forEach(_),this.h()},h(){c(n,"class","display svelte-74z2jo"),c(u,"class","button svelte-74z2jo"),c(y,"class","display svelte-74z2jo"),c(s,"class","toparea svelte-74z2jo"),c(m,"class","board svelte-74z2jo"),X(m,"grid-template-columns","repeat("+t[0]+", 1fr)"),X(m,"grid-template-rows","repeat("+t[1]+", 1fr)"),c(e,"class","game svelte-74z2jo")},m(a,E){C(a,e,E),k(e,s),k(s,n),se(l,n,null),k(s,o),k(s,u),w&&w.m(u,null),k(s,h),k(s,y),se(d,y,null),k(e,g),k(e,m);for(let O=0;O<M.length;O+=1)M[O]&&M[O].m(m,null);j=!0,L||(J=le(u,"click",t[12]),L=!0)},p(a,E){const O={};!i&&E[0]&8&&(i=!0,O.number=a[3],me(()=>i=!1)),l.$set(O),P!==(P=W(a))&&(w&&w.d(1),w=P&&P(a),w&&(w.c(),w.m(u,null)));const A={};if(!v&&E[0]&32&&(v=!0,A.number=a[5],me(()=>v=!1)),d.$set(A),E[0]&4052){V=Z(a[4]);let z;for(z=0;z<V.length;z+=1){const H=ve(a,V,z);M[z]?M[z].p(H,E):(M[z]=be(H),M[z].c(),M[z].m(m,null))}for(;z<M.length;z+=1)M[z].d(1);M.length=V.length}(!j||E[0]&1)&&X(m,"grid-template-columns","repeat("+a[0]+", 1fr)"),(!j||E[0]&2)&&X(m,"grid-template-rows","repeat("+a[1]+", 1fr)")},i(a){j||(S(l.$$.fragment,a),S(d.$$.fragment,a),j=!0)},o(a){K(l.$$.fragment,a),K(d.$$.fragment,a),j=!1},d(a){a&&_(e),re(l),w&&w.d(),re(d),we(M,a),L=!1,J()}}}function Pe(t,e,s){var n=(r=>(r[r.Waiting=0]="Waiting",r[r.Generated=1]="Generated",r[r.Won=2]="Won",r[r.Lost=3]="Lost",r))(n||{});let l=0,{width:i}=e,{height:o}=e,{numMines:u}=e,h=0;var y=(r=>(r[r.Covered=0]="Covered",r[r.Open=1]="Open",r[r.Flagged=2]="Flagged",r))(y||{});let d=[];function v(r,f){return r<0||r>=i||f<0||f>=o?{x:r,y:f,isMine:!1,type:1}:d[r+f*i]}function g(){s(4,d=new Array(i*o));for(let r=0;r<i;r++)for(let f=0;f<o;f++)s(4,d[r+f*i]={x:r,y:f,isMine:!1,type:0},d)}const m=[{x:0,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0}];function*j(r,f){for(const p of m)yield v(r+p.x,f+p.y)}function L(r,f){let p=0;for(const F of j(r,f))F.isMine&&p++;return p}function J(r,f){let p=0;for(const F of j(r,f))F.type==2&&p++;return p}function G(r,f){do{g();const p=[...d];for(let F=0;F<u;F++){const Q=Math.floor(Math.random()*p.length),$=p.splice(Q,1)[0];$.isMine=!0}}while(L(r,f)>0);s(2,l=1),M()}function T(){if(l!=1)return;d.reduce((f,p)=>p.isMine&&p.type==2?++f:f,0)==u&&h==0&&d.every(f=>f.type==2||f.type==1)&&(s(2,l=2),a())}function W(r,f){if(l==0&&G(r,f),l==1&&v(r,f).type!=2){if(v(r,f).type==0){if(v(r,f).type=1,v(r,f).isMine){s(2,l=3),a();return}if(L(r,f)==0)for(const p of j(r,f))W(p.x,p.y)}else if(v(r,f).type==1&&L(r,f)==J(r,f))for(const p of j(r,f))v(p.x,p.y).type==0&&W(p.x,p.y);T()}}function P(r,f){if(l!=1)return;const p=v(r,f);if(p.type==1)return;p.type=p.type==0?2:0;const F=d.reduce((Q,$)=>$.type==2?++Q:Q,0);s(3,h=u-F),T()}let w=-1,q=0,B=0;function V(){clearTimeout(w);const r=Date.now()-q+1005;w=setTimeout(()=>V(),Math.floor(r/1e3)*1e3%1e3),s(5,B=Math.floor((Date.now()-q)/1e3))}function M(){q=Date.now(),V()}function a(){clearTimeout(w)}function E(){s(2,l=0),g(),s(3,h=u),a(),s(5,B=0)}Me(()=>{E()});function O(r){h=r,s(3,h)}function A(r){B=r,s(5,B)}const z=(r,f,p,F)=>{F.preventDefault(),W(r.x,r.y),s(4,f[p]=v(r.x,r.y),d)},H=(r,f,p,F)=>{F.preventDefault(),P(r.x,r.y),s(4,f[p]=v(r.x,r.y),d)};return t.$$set=r=>{"width"in r&&s(0,i=r.width),"height"in r&&s(1,o=r.height),"numMines"in r&&s(13,u=r.numMines)},[i,o,l,h,d,B,n,y,v,L,W,P,E,u,O,A,z,H]}class Ve extends ae{constructor(e){super(),oe(this,e,Pe,Ie,ie,{width:0,height:1,numMines:13},null,[-1,-1])}}function ye(t){let e,s;return e=new Ve({props:{width:t[0],height:t[1],numMines:t[2]}}),{c(){te(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,l){se(e,n,l),s=!0},p(n,l){const i={};l&1&&(i.width=n[0]),l&2&&(i.height=n[1]),l&4&&(i.numMines=n[2]),e.$set(i)},i(n){s||(S(e.$$.fragment,n),s=!0)},o(n){K(e.$$.fragment,n),s=!1},d(n){re(e,n)}}}function Be(t){let e,s,n=t[3]&&ye(t);return{c(){n&&n.c(),e=Y()},l(l){n&&n.l(l),e=Y()},m(l,i){n&&n.m(l,i),C(l,e,i),s=!0},p(l,[i]){l[3]?n?(n.p(l,i),i&8&&S(n,1)):(n=ye(l),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(Ee(),K(n,1,1,()=>{n=null}),ke())},i(l){s||(S(n),s=!0)},o(l){K(n),s=!1},d(l){l&&_(e),n&&n.d(l)}}}function Ce(t,e,s){let n=30,l=16,i=99,o=!1;return Me(()=>{const u=new URLSearchParams(window.location.search),h=u.get("size");h&&s(0,[n,l]=h.split("x").map(Number).map(Math.floor),n,s(1,l));const y=u.get("mines");y&&s(2,i=Math.floor(Number(y))),s(3,o=!0)}),[n,l,i,o]}class Ue extends ae{constructor(e){super(),oe(this,e,Ce,Be,ie,{})}}export{Ue as component,He as universal};
