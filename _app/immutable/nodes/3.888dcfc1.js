import{s as ne,n as V,b as de,f as me,o as ke,r as Ee}from"../chunks/scheduler.bc760b9c.js";import{S as fe,i as ue,e as H,a as W,f as _,A as De,B as I,C as P,j as k,k as d,D as y,z as M,E as pe,s as $,g as R,r as re,x as Oe,c as x,h as j,u as le,l as ee,v as ie,F as oe,d as Q,t as Z,w as ae,m as he,n as ce,b as ze,p as Ne}from"../chunks/index.b6611d32.js";function te(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Le=!0,Ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le},Symbol.toStringTag,{value:"Module"}));function ge(e,t,r){const n=e.slice();return n[5]=t[r],n}function _e(e){let t,r,n,s,i,a,u,h,w,p,b;return{c(){t=I("svg"),r=I("defs"),n=I("pattern"),s=I("line"),i=I("path"),a=I("path"),u=I("path"),h=I("path"),w=I("path"),p=I("path"),b=I("path"),this.h()},l(g){t=P(g,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var m=k(t);r=P(m,"defs",{});var S=k(r);n=P(S,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var C=k(n);s=P(C,"line",{stroke:!0,"stroke-width":!0,y2:!0}),k(s).forEach(_),C.forEach(_),S.forEach(_),i=P(m,"path",{d:!0,class:!0}),k(i).forEach(_),a=P(m,"path",{d:!0,class:!0}),k(a).forEach(_),u=P(m,"path",{d:!0,class:!0}),k(u).forEach(_),h=P(m,"path",{d:!0,class:!0}),k(h).forEach(_),w=P(m,"path",{d:!0,class:!0}),k(w).forEach(_),p=P(m,"path",{d:!0,class:!0}),k(p).forEach(_),b=P(m,"path",{d:!0,class:!0}),k(b).forEach(_),m.forEach(_),this.h()},h(){d(s,"stroke","#800"),d(s,"stroke-width","1px"),d(s,"y2","1"),d(n,"id","off-fill"),d(n,"width","1"),d(n,"height","1"),d(n,"patternUnits","userSpaceOnUse"),d(n,"patternTransform","rotate(10)"),d(i,"d","M1 1l1-1h6l1 1-1 1H2z"),d(i,"class","svelte-n5l988"),y(i,"on",e[1][e[5]][0]),d(a,"d","M9 1l1 1v6L9 9 8 8V2z"),d(a,"class","svelte-n5l988"),y(a,"on",e[1][e[5]][1]),d(u,"d","M9 9l1 1v6l-1 1-1-1v-6z"),d(u,"class","svelte-n5l988"),y(u,"on",e[1][e[5]][2]),d(h,"d","M9 17l-1 1H2l-1-1 1-1h6z"),d(h,"class","svelte-n5l988"),y(h,"on",e[1][e[5]][3]),d(w,"d","M1 17l-1-1v-6l1-1 1 1v6z"),d(w,"class","svelte-n5l988"),y(w,"on",e[1][e[5]][4]),d(p,"d","M1 9L0 8V2l1-1 1 1v6z"),d(p,"class","svelte-n5l988"),y(p,"on",e[1][e[5]][5]),d(b,"d","M1 9l1-1h6l1 1-1 1H2z"),d(b,"class","svelte-n5l988"),y(b,"on",e[1][e[5]][6]),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width","192"),d(t,"height","320"),d(t,"viewBox","-1 -1 12 20"),d(t,"class","segment svelte-n5l988")},m(g,m){W(g,t,m),M(t,r),M(r,n),M(n,s),M(t,i),M(t,a),M(t,u),M(t,h),M(t,w),M(t,p),M(t,b)},p(g,m){m&3&&y(i,"on",g[1][g[5]][0]),m&3&&y(a,"on",g[1][g[5]][1]),m&3&&y(u,"on",g[1][g[5]][2]),m&3&&y(h,"on",g[1][g[5]][3]),m&3&&y(w,"on",g[1][g[5]][4]),m&3&&y(p,"on",g[1][g[5]][5]),m&3&&y(b,"on",g[1][g[5]][6])},d(g){g&&_(t)}}}function Se(e){let t,r=te(e[0]),n=[];for(let s=0;s<r.length;s+=1)n[s]=_e(ge(e,r,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=H()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=H()},m(s,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,i);W(s,t,i)},p(s,[i]){if(i&3){r=te(s[0]);let a;for(a=0;a<r.length;a+=1){const u=ge(s,r,a);n[a]?n[a].p(u,i):(n[a]=_e(u),n[a].c(),n[a].m(t.parentNode,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},i:V,o:V,d(s){s&&_(t),De(n,s)}}}function Fe(e,t,r){let n,{minDigits:s=3}=t,{maxDigits:i=3}=t,{number:a}=t;const u={0:[!0,!0,!0,!0,!0,!0,!1],1:[!1,!0,!0,!1,!1,!1,!1],2:[!0,!0,!1,!0,!0,!1,!0],3:[!0,!0,!0,!0,!1,!1,!0],4:[!1,!0,!0,!1,!1,!0,!0],5:[!0,!1,!0,!0,!1,!0,!0],6:[!0,!1,!0,!0,!0,!0,!0],7:[!0,!0,!0,!1,!1,!1,!1],8:[!0,!0,!0,!0,!0,!0,!0],9:[!0,!0,!0,!0,!1,!0,!0],"-":[!1,!1,!1,!1,!1,!1,!0]," ":[!1,!1,!1,!1,!1,!1,!1]};return e.$$set=h=>{"minDigits"in h&&r(2,s=h.minDigits),"maxDigits"in h&&r(3,i=h.maxDigits),"number"in h&&r(4,a=h.number)},e.$$.update=()=>{e.$$.dirty&28&&r(0,n=Math.floor(a).toString().padStart(s," ").slice(-i).split(""))},[n,u,s,i,a]}class be extends fe{constructor(t){super(),ue(this,t,Fe,Se,ne,{minDigits:2,maxDigits:3,number:4})}}function ye(e,t,r){const n=e.slice();return n[30]=t[r],n[31]=t,n[32]=r,n}function Ve(e){return{c(){this.h()},l(t){this.h()},h(){document.title="Minesweeper - Lost"},m:V,d:V}}function Ce(e){return document.title="Minesweeper - Victory - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0"),{c:V,l:V,m:V,d:V}}function Ie(e){return document.title="Minesweeper - ⏱ "+Math.floor(e[5]/60).toString().padStart(2,"0")+":"+(e[5]%60).toString().padStart(2,"0")+" - 🚩 "+e[3],{c:V,l:V,m:V,d:V}}function ve(e){let t;function r(i,a){if(i[2]==i[6].Generated)return Ie;if(i[2]==i[6].Won)return Ce;if(i[2]==i[6].Lost)return Ve}let n=r(e),s=n&&n(e);return{c(){s&&s.c(),t=H()},l(i){s&&s.l(i),t=H()},m(i,a){s&&s.m(i,a),W(i,t,a)},p(i,a){n!==(n=r(i))&&(s&&s.d(1),s=n&&n(i),s&&(s.c(),s.m(t.parentNode,t)))},d(i){i&&_(t),s&&s.d(i)}}}function Pe(e){let t;return{c(){t=he("😵")},l(r){t=ce(r,"😵")},m(r,n){W(r,t,n)},d(r){r&&_(t)}}}function We(e){let t;return{c(){t=he("😎")},l(r){t=ce(r,"😎")},m(r,n){W(r,t,n)},d(r){r&&_(t)}}}function Be(e){let t;return{c(){t=he("😊")},l(r){t=ce(r,"😊")},m(r,n){W(r,t,n)},d(r){r&&_(t)}}}function Me(e){let t,r,n,s;function i(...u){return e[18](e[30],e[31],e[32],...u)}function a(...u){return e[19](e[30],e[31],e[32],...u)}return{c(){t=R("div"),this.h()},l(u){t=j(u,"DIV",{class:!0}),k(t).forEach(_),this.h()},h(){d(t,"class",r="tile"+(e[30].type==e[7].Open?` mines-nearby-${e[9](e[30].x,e[30].y)}`:"")+" svelte-xu5y"),y(t,"opened",e[30].type==e[7].Open),y(t,"flagged",e[30].type==e[7].Flagged),y(t,"exploded",e[30].isMine&&e[30].type==e[7].Open),y(t,"displayMine",e[2]==e[6].Lost&&e[30].isMine),y(t,"clickable",e[30].type!=e[7].Open||e[11](e[30].x,e[30].y)&&e[9](e[30].x,e[30].y)==e[10](e[30].x,e[30].y))},m(u,h){W(u,t,h),n||(s=[oe(t,"click",i),oe(t,"contextmenu",a)],n=!0)},p(u,h){e=u,h[0]&16&&r!==(r="tile"+(e[30].type==e[7].Open?` mines-nearby-${e[9](e[30].x,e[30].y)}`:"")+" svelte-xu5y")&&d(t,"class",r),h[0]&144&&y(t,"opened",e[30].type==e[7].Open),h[0]&144&&y(t,"flagged",e[30].type==e[7].Flagged),h[0]&144&&y(t,"exploded",e[30].isMine&&e[30].type==e[7].Open),h[0]&84&&y(t,"displayMine",e[2]==e[6].Lost&&e[30].isMine),h[0]&3728&&y(t,"clickable",e[30].type!=e[7].Open||e[11](e[30].x,e[30].y)&&e[9](e[30].x,e[30].y)==e[10](e[30].x,e[30].y))},d(u){u&&_(t),n=!1,Ee(s)}}}function Ae(e){let t=e[5],r,n,s,i,a,u,h,w,p,b,g,m,S,C,z,A,X,Y,N=ve(e);function G(f){e[16](f)}let q={minDigits:3};e[3]!==void 0&&(q.number=e[3]),u=new be({props:q}),de.push(()=>pe(u,"number",G));function K(f,E){if(f[2]==f[6].Waiting||f[2]==f[6].Generated)return Be;if(f[2]==f[6].Won)return We;if(f[2]==f[6].Lost)return Pe}let F=K(e),D=F&&F(e);function se(f){e[17](f)}let J={minDigits:3};e[5]!==void 0&&(J.number=e[5]),m=new be({props:J}),de.push(()=>pe(m,"number",se));let B=te(e[4]),v=[];for(let f=0;f<B.length;f+=1)v[f]=Me(ye(e,B,f));return{c(){N.c(),r=H(),n=$(),s=R("div"),i=R("div"),a=R("div"),re(u.$$.fragment),w=$(),p=R("button"),D&&D.c(),b=$(),g=R("div"),re(m.$$.fragment),C=$(),z=R("div");for(let f=0;f<v.length;f+=1)v[f].c();this.h()},l(f){const E=Oe("svelte-d4ouuz",document.head);N.l(E),r=H(),E.forEach(_),n=x(f),s=j(f,"DIV",{class:!0});var L=k(s);i=j(L,"DIV",{class:!0});var l=k(i);a=j(l,"DIV",{class:!0});var o=k(a);le(u.$$.fragment,o),o.forEach(_),w=x(l),p=j(l,"BUTTON",{class:!0});var c=k(p);D&&D.l(c),c.forEach(_),b=x(l),g=j(l,"DIV",{class:!0});var O=k(g);le(m.$$.fragment,O),O.forEach(_),l.forEach(_),C=x(L),z=j(L,"DIV",{class:!0,style:!0});var T=k(z);for(let U=0;U<v.length;U+=1)v[U].l(T);T.forEach(_),L.forEach(_),this.h()},h(){d(a,"class","display svelte-xu5y"),d(p,"class","button svelte-xu5y"),d(g,"class","display svelte-xu5y"),d(i,"class","toparea svelte-xu5y"),d(z,"class","board svelte-xu5y"),ee(z,"grid-template-columns","repeat("+e[0]+", 1fr)"),ee(z,"grid-template-rows","repeat("+e[1]+", 1fr)"),d(s,"class","game svelte-xu5y")},m(f,E){N.m(document.head,null),M(document.head,r),W(f,n,E),W(f,s,E),M(s,i),M(i,a),ie(u,a,null),M(i,w),M(i,p),D&&D.m(p,null),M(i,b),M(i,g),ie(m,g,null),M(s,C),M(s,z);for(let L=0;L<v.length;L+=1)v[L]&&v[L].m(z,null);A=!0,X||(Y=oe(p,"click",e[14]),X=!0)},p(f,E){E[0]&32&&ne(t,t=f[5])?(N.d(1),N=ve(f),N.c(),N.m(r.parentNode,r)):N.p(f,E);const L={};!h&&E[0]&8&&(h=!0,L.number=f[3],me(()=>h=!1)),u.$set(L),F!==(F=K(f))&&(D&&D.d(1),D=F&&F(f),D&&(D.c(),D.m(p,null)));const l={};if(!S&&E[0]&32&&(S=!0,l.number=f[5],me(()=>S=!1)),m.$set(l),E[0]&16340){B=te(f[4]);let o;for(o=0;o<B.length;o+=1){const c=ye(f,B,o);v[o]?v[o].p(c,E):(v[o]=Me(c),v[o].c(),v[o].m(z,null))}for(;o<v.length;o+=1)v[o].d(1);v.length=B.length}(!A||E[0]&1)&&ee(z,"grid-template-columns","repeat("+f[0]+", 1fr)"),(!A||E[0]&2)&&ee(z,"grid-template-rows","repeat("+f[1]+", 1fr)")},i(f){A||(Q(u.$$.fragment,f),Q(m.$$.fragment,f),A=!0)},o(f){Z(u.$$.fragment,f),Z(m.$$.fragment,f),A=!1},d(f){f&&(_(n),_(s)),_(r),N.d(f),ae(u),D&&D.d(),ae(m),De(v,f),X=!1,Y()}}}function He(e,t,r){var n=(l=>(l[l.Waiting=0]="Waiting",l[l.Generated=1]="Generated",l[l.Won=2]="Won",l[l.Lost=3]="Lost",l))(n||{});let s=0,{width:i}=t,{height:a}=t,{numMines:u}=t,h=0;var w=(l=>(l[l.Covered=0]="Covered",l[l.Open=1]="Open",l[l.Flagged=2]="Flagged",l))(w||{});let p=[];function b(l,o){return l<0||l>=i||o<0||o>=a?{x:l,y:o,isMine:!1,type:1}:p[l+o*i]}function g(){r(4,p=new Array(i*a));for(let l=0;l<i;l++)for(let o=0;o<a;o++)r(4,p[l+o*i]={x:l,y:o,isMine:!1,type:0},p)}const m=[{x:0,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0}];function*S(l,o){for(const c of m)yield b(l+c.x,o+c.y)}function C(l,o){let c=0;for(const O of S(l,o))O.isMine&&c++;return c}function z(l,o){let c=0;for(const O of S(l,o))O.type==2&&c++;return c}function A(l,o){for(const c of S(l,o))if(c.type==0)return!0;return!1}function X(l,o){if(p.length-9<=u)throw new Error("Too many mines for board, cannot generate board.");do{g();const c=[...p];for(let O=0;O<u;O++){const T=Math.floor(Math.random()*c.length),U=c.splice(T,1)[0];U.isMine=!0}}while(C(l,o)>0);r(2,s=1),se()}function Y(){if(s!=1)return;p.reduce((o,c)=>c.isMine&&c.type==2?++o:o,0)==u&&h==0&&p.every(o=>o.type==2||o.type==1)&&(r(2,s=2),J())}function N(l,o){if(s==0&&X(l,o),s==1&&b(l,o).type!=2){if(b(l,o).type==0){if(b(l,o).type=1,b(l,o).isMine){r(2,s=3),J();return}if(C(l,o)==0)for(const c of S(l,o))N(c.x,c.y)}else if(b(l,o).type==1&&C(l,o)==z(l,o))for(const c of S(l,o))b(c.x,c.y).type==0&&N(c.x,c.y);Y()}}function G(l,o){if(s!=1)return;const c=b(l,o);if(c.type==1)return;c.type=c.type==0?2:0;const O=p.reduce((T,U)=>U.type==2?++T:T,0);r(3,h=u-O),Y()}let q=-1,K=0,F=0;function D(){clearTimeout(q);const l=Date.now()-K+1005;q=setTimeout(()=>D(),Math.floor(l/1e3)*1e3%1e3),r(5,F=Math.floor((Date.now()-K)/1e3))}function se(){K=Date.now(),D()}function J(){clearTimeout(q)}function B(){r(2,s=0),g(),r(3,h=u),J(),r(5,F=0)}ke(()=>{B()});function v(l){h=l,r(3,h)}function f(l){F=l,r(5,F)}const E=(l,o,c,O)=>{O.preventDefault(),N(l.x,l.y),r(4,o[c]=b(l.x,l.y),p)},L=(l,o,c,O)=>{O.preventDefault(),G(l.x,l.y),r(4,o[c]=b(l.x,l.y),p)};return e.$$set=l=>{"width"in l&&r(0,i=l.width),"height"in l&&r(1,a=l.height),"numMines"in l&&r(15,u=l.numMines)},[i,a,s,h,p,F,n,w,b,C,z,A,N,G,B,u,v,f,E,L]}class Te extends fe{constructor(t){super(),ue(this,t,He,Ae,ne,{width:0,height:1,numMines:15},null,[-1,-1])}}function we(e){let t,r;return t=new Te({props:{width:e[0],height:e[1],numMines:e[2]}}),{c(){re(t.$$.fragment)},l(n){le(t.$$.fragment,n)},m(n,s){ie(t,n,s),r=!0},p(n,s){const i={};s&1&&(i.width=n[0]),s&2&&(i.height=n[1]),s&4&&(i.numMines=n[2]),t.$set(i)},i(n){r||(Q(t.$$.fragment,n),r=!0)},o(n){Z(t.$$.fragment,n),r=!1},d(n){ae(t,n)}}}function Ue(e){let t,r,n=e[3]&&we(e);return{c(){n&&n.c(),t=H()},l(s){n&&n.l(s),t=H()},m(s,i){n&&n.m(s,i),W(s,t,i),r=!0},p(s,[i]){s[3]?n?(n.p(s,i),i&8&&Q(n,1)):(n=we(s),n.c(),Q(n,1),n.m(t.parentNode,t)):n&&(Ne(),Z(n,1,1,()=>{n=null}),ze())},i(s){r||(Q(n),r=!0)},o(s){Z(n),r=!1},d(s){s&&_(t),n&&n.d(s)}}}function Re(e,t,r){let n=30,s=16,i,a=!1;return ke(()=>{const u=new URLSearchParams(window.location.search),h=u.get("size");h&&r(0,[n,s]=h.split("x").map(Number).map(Math.floor),n,r(1,s));const w=u.get("mines");w&&r(2,i=Math.floor(Number(w))),i===void 0&&r(2,i=Math.floor(n*s*.2)),r(3,a=!0)}),[n,s,i,a]}class Je extends fe{constructor(t){super(),ue(this,t,Re,Ue,ne,{})}}export{Je as component,Ke as universal};
